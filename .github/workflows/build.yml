name: Build plugin
on: 
  push:
    branches: ['actions_setup']
jobs:
  Linux-Build:
    name: Linux build
    runs-on: ubuntu-18.04
    steps:
      - name: Check out repository
        uses: actions/checkout@v2
      - name: Install dependencies
        run:  sudo apt install libasound2-dev libcurl4-openssl-dev libx11-dev libxinerama-dev libxext-dev libfreetype6-dev libwebkit2gtk-4.0-dev libglu1-mesa-dev libjack-jackd2-dev lv2-dev
      - name: Make release
        working-directory: ./Builds/LinuxMakefile
        run: make -j4 CONFIG=Release
      - name: Publish plugin
        uses: actions/upload-artifact@v2
        with:
          name: Reverberator
          path: ./Builds/LinuxMakefile/build/Reverberator.vst3